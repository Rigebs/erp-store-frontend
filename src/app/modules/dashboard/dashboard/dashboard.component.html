<div class="dashboard-container">
    <!-- KPIs -->
    <div class="kpi-cards">
        <div class="card">
            <div class="card-icon">
                <span class="material-icons">attach_money</span>
            </div>
            <div class="card-content">
                <div class="card-title">Total Ventas</div>
                <div class="card-value">S/. {{ totalSales }}</div>
            </div>
        </div>

        <div class="card">
            <div class="card-icon">
                <span class="material-icons">receipt_long</span>
            </div>
            <div class="card-content">
                <div class="card-title">Transacciones</div>
                <div class="card-value">{{ totalTransactions }}</div>
            </div>
        </div>

        <div class="card">
            <div class="card-icon">
                <span class="material-icons">sell</span>
            </div>
            <div class="card-content">
                <div class="card-title">Ticket Promedio</div>
                <div class="card-value">S/. {{ avgTicket }}</div>
            </div>
        </div>
    </div>

    <!-- Sales by Date Chart -->
    <!-- Charts -->
    <div class="chart-container-wrapper">
        <div class="chart-container">
            <h3>Ventas por Fecha</h3>
            <canvas baseChart [data]="salesByDateData" [options]="salesByDateOptions" chartType="bar"></canvas>
        </div>

        <div class="chart-container">
            <h3>Ventas por Cajero</h3>
            <canvas baseChart [data]="salesByCashierData" [options]="salesByCashierOptions" chartType="bar"></canvas>
        </div>
    </div>


    <!-- Tables -->
    <div class="tables">
        <div class="table-card">
            <h4>Top Productos</h4>
            <table>
                <tr>
                    <th>Producto</th>
                    <th>Cantidad</th>
                    <th>Total</th>
                </tr>
                <tr *ngFor="let p of topProducts">
                    <td>{{ p.productName }}</td>
                    <td>{{ p.quantitySold }}</td>
                    <td>S/. {{ p.totalRevenue }}</td>
                </tr>
            </table>
        </div>

        <div class="table-card">
            <h4>Bajo Stock</h4>
            <table>
                <tr>
                    <th>Producto</th>
                    <th>Stock</th>
                </tr>
                <tr *ngFor="let p of lowStock">
                    <td>{{ p.productName }}</td>
                    <td>{{ p.stock }}</td>
                </tr>
            </table>
        </div>

        <div class="table-card">
            <h4>Top Clientes</h4>
            <table>
                <tr>
                    <th>Cliente</th>
                    <th>Compras</th>
                    <th>Total Gastado</th>
                </tr>
                <tr *ngFor="let c of topCustomers">
                    <td>{{ c.customerName }}</td>
                    <td>{{ c.purchases }}</td>
                    <td>S/. {{ c.totalSpent }}</td>
                </tr>
            </table>
        </div>
    </div>
</div>